<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!ENTITY rfc2119 PUBLIC "" "./reference.RFC.2119.xml">
<!ENTITY rfc4861 PUBLIC "" "./reference.RFC.4443.xml">
<!ENTITY rfc4861 PUBLIC "" "./reference.RFC.4861.xml">
<!ENTITY I-D.ietf-intarea-provisioning-domains PUBLIC "" "./reference.I-D.ietf-intarea-provisioning-domains.xml">
]>
<!-- WK: Set category, IPR, docName -->
<rfc category="std" docName="draft-sixxers-6man-ndp-netext-00"
     ipr="trust200902"
     >
  <?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>

  <?rfc toc="yes" ?>

  <?rfc symrefs="yes" ?>

  <?rfc sortrefs="yes"?>

  <?rfc iprnotified="no" ?>

  <?rfc strict="yes"?>

  <?rfc compact="yes" ?>

<!--
Limitations of current approaches

    - no provision for router reboots to learn previously delegated prefixes
    - no provision for multiple prefixes delegated from multiple routers
    - no support for provisioning domains [RFC7556]

NOTE: Update the clause that says routers don't listen to RAs.

want to preserve the security afforded by RA guard [citation], so don't
limit the new protocol to follow RAs closely.

don't modify RA directly, to more easily support network extension on shared
links.

The router can send NEA with a ::/0 PIO with non-zero lifetimes. The shortest
non-zero lifetime is when the client SHOULD ask again. If all zero lifetimes
then the client SHOULD NOT solicit for network extension (until it receives
an NER or other admin/policy things change).

Receiving an RA with PIO of 2001:db8:a:b::/64 and then an NES/NEA exchange
with PIO of same means the client knows the prefix is dedicated.

NES and NEA may include PIO or PVD OPT with inner PIO.

NEA may in RIOs which the receiver SHOULD add to the relevant routing table.

NES, NEA, NER MAY include a Nonce option. If included, all subsequent
communications which result MUST include this Nonce. (the value of this?)

New ND option: Network Extension
subtype:
    - Solicitation (NES)
    - Allocation (NEA)
    - Report (NER)

NES:
    - sent to routers whose RAs we've processed and accepted
    - MUST be unicast
    - contains either one or more DP options or a PVD option with
      one or more DP options (but not both?)

NEA:
    - sent to NES, unicast

NER:
    - sent to NES, unicast, or sent to ff02::requesting_routers
    - nodes MUST drop NERs that are from routers from which they
      have not yet received, processed and accepted a RA

    - reponse is to to start NES for that router
-->

  <front>

    <title abbrev="IPv6 NDP Network Extension">
IPv6 Neighbor Discovery Protocol for Network Extension
    </title>

    <author fullname="Erik Kline" initials="E." surname="Kline">
      <organization>Google Japan</organization>

      <address>
        <postal>
          <street>Roppongi 6-10-1, 44th Floor</street>

          <country>Japan</country>

          <code>106-6144</code>

          <city>Minato, Tokyo</city>
        </postal>

        <phone/>

        <email/>
      </address>
    </author>

    <date year="2018"/>

    <abstract>
      <t>
This document describes a protocol that uses new options in the IPv6
Neighbor Discovery Protocol <xref target="RFC4861"/> to extend IPv6 networks.
The approach described has several advantages over existing techniques, chief
among them the ability to work with the Provisioning Domain (PvD) architecture
<xref target="I-D.ietf-intarea-provisioning-domains"/>.
      </t>
    </abstract>
  </front>

  <middle>
    <section title="Introduction">
      <section title="Requirements Notation">
        <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in
        <xref target="RFC2119"/>.</t>
      </section>
    </section>

    <section title="Network Extension Message">
      <figure anchor="format"
              title="IPv6 NDP Network Extension Message format">
          <preamble/>

          <artwork><![CDATA[
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type      |     Code      |          Checksum             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Reserved                            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
            ]]></artwork>

          <postamble/>
        </figure>

        <t>
IP Fields:
          <list style="hanging">
            <t hangText="Source Address">The link-local address of the sender.</t>
            <t hangText="Destination Address"></t>
            <t hangText="Hop Limit">255</t>
          </list>
        </t>

        <t>
ICMP Fields:
          <list style="hanging">
            <t hangText="Type      ">(8 bits) TBD (IANA)</t>
            <t hangText="Code      ">(8 bits) TBD (IANA)</t>
            <t hangText="Checksum  ">(16 bits) The ICMP checksum;
                                     see <xref target="RFC4443"/></t>
            <t hangText="Reserved  ">32 bit unused field.
               It MUST be initialized to zero by the sender and MUST be ignored
               by the receiver.</t>
          </list>
        </t>
    </section>

    <section anchor="iana" title="IANA Considerations">
      <t>
Request IANA to allocate a link-local multicast address, ff02::XXX,
All_Network_Extension_Requesting_Routers.
      </t>
    </section>
  </middle>

  <back>
    <references title="Normative References">
      <?rfc include='reference.RFC.2119'?>
      <?rfc include='reference.RFC.4443'?>
      <?rfc include='reference.RFC.4861'?>
      <?rfc include='reference.I-D.ietf-intarea-provisioning-domains'?>
    </references>
  </back>
</rfc>
